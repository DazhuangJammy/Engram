# 架构演进

## 单体时期（2021）
最初是一个 Go 单体，所有逻辑在一个服务里。前期开发快，但到了20个接口以后开始混乱。

## 拆分决策（2022年初）
用户量到了10万DAU，单体部署扛不住。决定拆成三个核心服务：
- 用户服务（user-svc）：注册、登录、个人信息
- 订单服务（order-svc）：下单、状态流转
- 支付服务（pay-svc）：支付、退款、对账

## 通信方式
- 服务间同步调用：gRPC
- 异步事件：Kafka（订单状态变更、支付回调）
- 选 gRPC 而不是 HTTP 是因为内部调用性能要求高，且有强类型 proto 约束

## 当前状态
稳定运行，偶尔加新服务（通知服务、数据分析服务），但核心三个没再动过。
